(function(){var RkNClick=function(){this.sUrl=document.URL;this.sDomain=document.domain;this.sRef=document.referrer;this.sNDomain='tracking.reeket.com';this.sRkDomain='www.reeket.com';this.oRkSetting={'cA1':{'d':{'_Rk_N_Id':'','_Rk_Check':''},'c':{'use':true,'ee':'day','e':'90'}},'cA2':{'d':{'sku':'','branduid':'','brandcode':'','product_no':'','goodsno':'','goodsNo':'','index_no':'','pno':'','goin_code':'','Gserial':''},'c':{'use':true,'ee':'day','e':'7'}},'eO1':{'c':{'use':true,'ee':'','e':''}},'eJ1':{'c':{'use':false,'ee':'','e':''}}};this.getCookie=function(rkk,data){var sCooData=document.cookie;var sStart=sCooData.indexOf('_Rk_K_'+rkk);if(sStart==-1){return data;};sStart=sCooData.indexOf("=",sStart)+1;sCooData=unescape(sCooData.substring(sStart,sCooData.length));var sEnd=sCooData.indexOf(";",sCooData);if(sEnd==-1){sEnd=sCooData.length;};return JSON.parse(sCooData.substring(0,sEnd).replace(/\\'/g,"'"));};this.setCookie=function(rkk,data,e,em){var sCooData='_Rk_K_'+rkk+"="+escape(JSON.stringify(data))+"; path=/;";if(document.domain.substr(0,4)=='www.'){sCooData+='domain='+document.domain.substr(3)+';';}else if(document.domain.substr(0,2)=='m.'){sCooData+='domain='+document.domain.substr(1)+';';}else if(document.domain.substr(0,7)=='mobile.'){sCooData+='domain='+document.domain.substr(6)+';';}else{if(!window.location.origin){window.location.origin=window.location.protocol+'//'+window.location.hostname+(window.location.port?(':'+window.location.port):'');};if(typeof document.location.origin!='undefined'){if(document.location.origin==window.location.protocol+'//'+document.domain){sCooData+='domain=.'+document.domain+';';};};};var d=new Date();if(em===undefined){em='';};if(e===undefined){e=0;};if(em=='min'){d.setTime(d.getTime()+(parseInt(e)*60*1000));}else if(em=='day'){d.setDate(d.getDate()+parseInt(e));};if(e!=0)sCooData+=" expires="+d.toGMTString()+";";document.cookie=sCooData;};this.doSend=function(_rkk,data){if(_rkk===undefined||this.oRkSetting.hasOwnProperty(_rkk)===undefined){return;};if(typeof(data)==="object"){var action="//"+this.sNDomain+"/click_check.html";var sMethod='post';if(_rkk=='cA2'){action="//"+this.sNDomain+"/product.htm";sMethod='get';};if(data['_Rk_Check']){var action="//"+this.sRkDomain+"/advertiser/click_check.html";};var _i=document.createElement("iframe");_i.setAttribute("type","hidden");_i.setAttribute("width","0");_i.setAttribute("height","0");_i.name='rk_'+_rkk;document.body.appendChild(_i);_i.contentWindow.name=_i.name;var _f=document.createElement("form");_f.method=sMethod;_f.action=action;_f.target=_i.name;document.body.appendChild(_f);data['_Rk_K']=_rkk;data['_Rk_domain']=document.domain;var _v=this.setEncode64(data);if(sMethod=='post'){var _d=document.createElement("input");_d.setAttribute("type","hidden");_d.setAttribute("name","v");_d.setAttribute("value",_v);_f.appendChild(_d);}else{var _d=document.createElement("input");var _nm=false;_d.setAttribute("type","hidden");for(var _sku in this.oRkSetting['cA2']['d']){if(typeof(data[_sku])=='string'&&data.hasOwnProperty(_sku)===true){if(_sku!='branduid'&&_sku!='brandcode'){_d.setAttribute("name","sku");_d.setAttribute("value",data[_sku]);_nm=true;}}};if(_nm==false){var dt=new Date();var jsr=dt.getFullYear()+''+(dt.getMonth()+1)+''+dt.getDate()+''+dt.getHours()+''+dt.getMinutes()+''+dt.getSeconds();_d.setAttribute("name","checks");_d.setAttribute("value",jsr);};_f.appendChild(_d);};_f.submit();document.body.removeChild(_f);}else{return;};};this.setEncode64=function(d){var _j=JSON.stringify(d);var _ua=navigator.userAgent.toLowerCase();var keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var chr1,chr2,chr3;var enc1,enc2,enc3,enc4;var i=0;if(_ua.indexOf(" chrome/")>=0||_ua.indexOf(" firefox/")>=0||_ua.indexOf(' gecko/')>=0){var _d='';}else{var _d=[];};_j=this.setEncodeUtf8(_j);while(i<_j.length){chr1=_j.charCodeAt(i++);chr2=_j.charCodeAt(i++);chr3=_j.charCodeAt(i++);enc1=chr1>>2;enc2=((chr1&3)<<4)|(chr2>>4);enc3=((chr2&15)<<2)|(chr3>>6);enc4=chr3&63;if(isNaN(chr2)){enc3=enc4=64;}else if(isNaN(chr3)){enc4=64;};var _s=keyStr.charAt(enc1)+keyStr.charAt(enc2)+keyStr.charAt(enc3)+keyStr.charAt(enc4);if(typeof(_d)==="object"){_d.push(_s);}else{_d+=_s;};};if(typeof(_d)==="object"){return _d.join('');};return _d;};this.setEncodeUtf8=function(d){d=d.replace(/\r\n/g,"\n");var fcc="";for(var n=0;n<d.length;n++){var c=d.charCodeAt(n);if(c<128){fcc+=String.fromCharCode(c);}else if((c>127)&&(c<2048)){fcc+=String.fromCharCode((c>>6)|192);fcc+=String.fromCharCode((c&63)|128);}else{fcc+=String.fromCharCode((c>>12)|224);fcc+=String.fromCharCode(((c>>6)&63)|128);fcc+=String.fromCharCode((c&63)|128);}}return fcc;};this.setCounter=function(){if(this.oRkSetting){var oTargetUrl=this.sUrl;var sAddr=unescape(oTargetUrl);var sParam='';sParam=(sAddr.slice(sAddr.indexOf(this.sDomain)+this.sDomain.length,sAddr.length));if(sParam.indexOf('?')<0&&sParam.indexOf('=')<0&&sParam.indexOf('/')>=0){var _aParam=sParam.split('/');if(typeof(_aParam[1])==="string"&&_aParam[1]=="product"){if(_aParam[3]!=''){sParam='?product_no='+_aParam[3];};};};sParam=(sParam.slice(sParam.indexOf('?')+1,sParam.length)).split('&');for(var _rkk in this.oRkSetting){var data={};var total=0;var v=this.oRkSetting[_rkk];var cA1=this.getCookie('cA1',this.oRkSetting['cA1']['d']);if(v.hasOwnProperty('d')===false){continue;};var oTargetCookie=this.getCookie(_rkk,v.d);for(var i=0;i<sParam.length;i++){var aTmp=sParam[i].split('=');if(v.d.hasOwnProperty(aTmp[0])!==false){if(v.hasOwnProperty('c')!==false&&v.c.use!==false){if(oTargetCookie[aTmp[0]]==aTmp[1]){if(!(_rkk=='cA1'&&aTmp[0]=='_Rk_Check')){continue;}};};data[aTmp[0]]=aTmp[1];};};for(var k in data){total++;};if(total>0){if(v.hasOwnProperty('c')!==false&&v.c.use!==false){if(_rkk=='cA1'&&data['_Rk_Check']){this.setCookie(_rkk,data);}else{this.setCookie(_rkk,data,v.c.e,v.c.ee);}};if(data['_Rk_N_Id']===undefined&&cA1['_Rk_N_Id']!=''){data['_Rk_N_Id']=cA1['_Rk_N_Id'];};if(_rkk!='cA1'&&data['_Rk_Check']===undefined&&cA1['_Rk_Check']!=undefined){data['_Rk_Check']=cA1['_Rk_Check'];};if(v.hasOwnProperty('fd')!==false){for(var i in v.fd){data[i]=v.fd[i];};};this.doSend(_rkk,data);};};};};this.setRkEvent=function(){if(typeof(RkNEvent)==='function'){var ORkNEvent=new RkNEvent();var data={};var cA1=this.getCookie('cA1',this.oRkSetting['cA1']['d']);if(ORkNEvent.data!==undefined){for(var _rkk in ORkNEvent.data){var bUp=false;if(this.oRkSetting[_rkk]){var v=this.oRkSetting[_rkk];var data=ORkNEvent.data[_rkk];var oTargetCookie=this.getCookie(_rkk,v);var sDoubleCheck='Unknown';if(cA1['_Rk_N_Id']){data['_Rk_N_Id']=cA1['_Rk_N_Id'];sDoubleCheck=data['_Rk_N_Id'];};if(cA1['_Rk_Check']){data['_Rk_Check']=cA1['_Rk_Check'];};if(_rkk=='eO1'){if(oTargetCookie[data['ordernum']]===undefined){oTargetCookie[data['ordernum']]=sDoubleCheck;bUp=true;};}else if(_rkk=='eJ1'){bUp=true;}else if(_rkk=='cA2'){bUp=true;}else{continue;};if(bUp===true){if(v.hasOwnProperty('c')!==false&&v.c.use!==false){this.setCookie(_rkk,oTargetCookie,v.c.e,v.c.ee);};if(v.hasOwnProperty('fd')!==false){for(var i in v.fd){data[i]=v.fd[i];};};this.doSend(_rkk,data);};};};RkNEvent=undefined;ORkNEvent=undefined;};};};this.init=function(){this.setCounter();this.setRkEvent();this.setCookie('eJ1','.');};this.init();};new RkNClick();})(window);